{"version":3,"sources":["App.tsx","index.tsx"],"names":["App","state","leftTimeZone","moment","tz","zone","rightTimeZone","modal","components","timeGutterHeader","react_default","a","createElement","className","_this","abbr","Date","now","renderUtcOffset","title","name","onClick","handleSwitchLeftTimeZoneButtonClick","handleSwitchRightTimeZoneButtonClick","timeSlotWrapper","props","typedProps","undefined","resource","dateAndTimeUtc","utc","value","dateAndTimeTzLeft","clone","dateAndTimeTzRight","format","children","setState","side","search","handleSwitchTimeZoneSearchInputChange","event","currentTarget","Error","Object","objectSpread","handleSwitchTimeZoneSelectChange","handleCloseModalButtonClick","offsetMinutes","utcOffset","offsetSign","Math","sign","offsetHours","abs","floor","offsetHoursFraction","toFixed","substring","concat","_this2","this","results","names","filter","n","toUpperCase","includes","onChange","size","map","key","Fragment","react_big_calendar_esm","localizer","events","defaultView","scrollToTime","createPortal","renderSwitchModal","document","body","Component","BigCalendar","momentLocalizer","start","startOf","toDate","end","endOf","add","render","App_App","getElementById"],"mappings":"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","file":"static/js/main.146f16ce.chunk.js","sourcesContent":["import './App.css';\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport React, { Component, ReactElement, ChangeEventHandler } from 'react';\nimport BigCalendar, { Components } from 'react-big-calendar';\nimport moment, { MomentZone } from 'moment';\nimport tz from 'moment-timezone';\nimport { createPortal } from 'react-dom';\n\ntype AppState = {\n  leftTimeZone: MomentZone;\n  rightTimeZone: MomentZone;\n  modal: null | { side: 'left' | 'right'; search: string; };\n};\n\nexport default class App extends Component<{}, AppState> {\n  public readonly state: AppState = {\n    leftTimeZone: moment.tz.zone('America/New_York')!,\n    rightTimeZone: moment.tz.zone('Europe/Prague')!,\n    modal: null,\n  };\n\n  private static readonly localizer = BigCalendar.momentLocalizer(moment);\n\n  private static readonly events = [\n    {\n      title: 'This day',\n      start: moment().startOf('day').toDate(),\n      end: moment().endOf('day').toDate(),\n    },\n    {\n      title: 'Now for an hour',\n      start: moment().toDate(),\n      end: moment().add(1, 'hour').toDate(),\n    }\n  ];\n\n  private components: Components = {\n    timeGutterHeader: () => {\n      return (\n        // Note that `rbc-time-header-gutter` is to have the header dynamically strethed to match the width of the gutter by RBC\n        <div className=\"gutterSplit rbc-time-header-gutter\">\n          <span>\n            <span>{this.state.leftTimeZone.abbr(Date.now())}</span>\n            <span>{this.renderUtcOffset(this.state.leftTimeZone)}</span>\n            <span className=\"infoIcon\" title={this.state.leftTimeZone.name}>i</span>\n            <button onClick={this.handleSwitchLeftTimeZoneButtonClick}>…</button>\n          </span>\n          <span>\n            <span>{this.state.rightTimeZone.abbr(Date.now())}</span>\n            <span>{this.renderUtcOffset(this.state.rightTimeZone)}</span>\n            <span className=\"infoIcon\" title={this.state.rightTimeZone.name}>i</span>\n            <button onClick={this.handleSwitchRightTimeZoneButtonClick}>…</button>\n          </span>\n        </div>\n      );\n    },\n    timeSlotWrapper: (props) => {\n      const typedProps: { value: Date, resource: null | undefined, children: ReactElement } = props as any;\n      if (typedProps.resource === undefined) {\n        const dateAndTimeUtc = moment.utc(typedProps.value);\n        const dateAndTimeTzLeft = dateAndTimeUtc.clone().tz(this.state.leftTimeZone.name);\n        const dateAndTimeTzRight = dateAndTimeUtc.clone().tz(this.state.rightTimeZone.name);\n        return (\n          <div className=\"gutterSplit rbc-time-slot\">\n            <span title={dateAndTimeTzLeft.format()}>\n              {dateAndTimeTzLeft.format('HH:mm A')}\n            </span>\n            <span title={dateAndTimeTzRight.format()}>\n              {dateAndTimeTzRight.format('HH:mm A')}\n            </span>\n          </div>\n        );\n      }\n\n      return typedProps.children;\n    },\n  };\n\n  private renderUtcOffset(zone: MomentZone) {\n    const offsetMinutes = zone.utcOffset(Date.now());\n    const offsetSign = ['+', '', '-'][Math.sign(offsetMinutes / 60) + 1 /* Convert sign -1 | 0 | 1 to index 0 | 1 | 2 */];\n    const offsetHours = Math.abs(Math.floor(offsetMinutes / 60));\n    let offsetHoursFraction = (Math.abs(offsetMinutes / 60) % 1).toFixed(2).substring(1) /* Discard 0 leaving fraction */;\n\n    // http://unicodefractions.com/\n    switch (offsetHoursFraction) {\n      case '.00': offsetHoursFraction = ''; break;\n      case '.25': offsetHoursFraction = `¼`; break;\n      case '.50': offsetHoursFraction = `½`; break;\n      case '.75': offsetHoursFraction = `¾`; break;\n    }\n\n    return `UTC${offsetSign}${offsetHours || ''}${offsetHoursFraction}`;\n  }\n\n  private renderSwitchModal() {\n    if (this.state.modal === null) {\n      throw new Error('Invalid state');\n    }\n\n    let value = '';\n    switch (this.state.modal.side) {\n      case 'left': value = this.state.leftTimeZone.name; break;\n      case 'right': value = this.state.rightTimeZone.name; break;\n    }\n\n    const search = this.state.modal.search;\n    const results = moment.tz.names().filter(n => n.toUpperCase().includes(search.toUpperCase()));\n    return (\n      <div className=\"modal\">\n        Switch the {this.state.modal.side} time zone to:\n        <input value={this.state.modal.search} onChange={this.handleSwitchTimeZoneSearchInputChange} />\n        <select value={value} onChange={this.handleSwitchTimeZoneSelectChange} size={20}>\n          {results.map(n => <option value={n} key={n}>{n} {this.renderUtcOffset(moment.tz.zone(n)!)}</option>)}\n        </select>\n        <button onClick={this.handleCloseModalButtonClick}>Close</button>\n      </div>\n    );\n  }\n\n  private readonly handleSwitchLeftTimeZoneButtonClick = () => {\n    this.setState({ modal: { side: 'left', search: '' } });\n  };\n\n  private readonly handleSwitchRightTimeZoneButtonClick = () => {\n    this.setState({ modal: { side: 'right', search: '' } });\n  };\n\n  private readonly handleSwitchTimeZoneSearchInputChange: ChangeEventHandler<HTMLInputElement> = event => {\n    const search = event.currentTarget.value;\n    this.setState(state => {\n      if (state.modal === null) {\n        throw new Error('Invalid state');\n      }\n\n      return { modal: { ...state.modal, search } };\n    });\n  };\n\n  private readonly handleSwitchTimeZoneSelectChange: ChangeEventHandler<HTMLSelectElement> = event => {\n    if (this.state.modal === null) {\n      throw new Error('Invalid state');\n    }\n\n    const tz = moment.tz.zone(event.currentTarget.value)!;\n    switch (this.state.modal.side) {\n      case 'left': this.setState({ leftTimeZone: tz, modal: null }); return;\n      case 'right': this.setState({ rightTimeZone: tz, modal: null }); return;\n    }\n\n    throw new Error('Called in an invalid state.');\n  };\n\n  private readonly handleCloseModalButtonClick = () => {\n    this.setState({ modal: null });\n  }\n\n  render() {\n    // Note that a reference to `tz` needs to be kept otherwise it gets compiled away even though it is needed for `moment.tz`\n    void tz;\n    return (\n      <>\n        <BigCalendar localizer={App.localizer} events={App.events} components={this.components} defaultView=\"week\" scrollToTime={new Date()} />\n        {this.state.modal && createPortal(this.renderSwitchModal(), document.body)}\n      </>\n    );\n  }\n};\n","import './index.css';\nimport React from 'react';\nimport { render } from 'react-dom';\nimport App from './App';\n\nrender(<App />, document.getElementById('root'));\n"],"sourceRoot":""}